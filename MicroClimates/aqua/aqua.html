<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- General -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aqua - MicroClimates</title>
    <meta name="description" content="Abstract explorations of our changing climate on planet Earth. Click, scroll and drag to explore.">

    <!-- Links -->
    <link href="../main.css" rel="stylesheet">
    <!-- Load latest acron version first -->
    <script type="text/javascript" src="https://unpkg.com/acorn"></script>
    <!-- Then load Paper.js -->
    <script type="text/javascript" src="https://unpkg.com/paper"></script>
    <!-- Place your Paperscript here -->
    <script type="text/paperscript" canvas="climateCanvas">
      var screenWidth = view.size.width;
      var screenHeight = view.size.height;
      let colorCount = 0;
      var paths = [];
      var createRipple = false;
      let colors = ['#91C5DE', '#367AB2', '#295E86', '#274A56'];

      var i = 1

      var wave;

      var ripples = [];

      function onMouseDown(event) {
        i = 1;
        // Create a new wave and give it a stroke color:
        wave = new Path();
        wave.strokeColor = colors[colorCount];
        wave.strokeWidth = screenWidth;
        // Add a segment to the wave where
        // you clicked:
        wave.add(screenWidth/2,screenHeight);
        wave.opacity = .5;
        wave.blendMode = 'multiply';
        createRipple = true;
      }

      function onMouseDrag(event) {
        if (event.delta.y<0) {
            wave.add(screenWidth/2,event.point.y);
            createRipple = false;
          } 
        // Every drag event, add a segment
        // to the wave at the position of the mouse:
      }

      function onMouseUp(event) {
        if (createRipple){
          createRipple = false;
          ripples.push (new Shape.Circle({
            center: event.point,
            radius: 3,
            strokeWidth : 1,
            fillColor: null,
            strokeColor: colors[colorCount]
          }))

          var tween = ripples[ripples.length-1].tweenTo(
            { opacity: 0 },
            { duration: 1300 }
          );
            
          tween.then(function() {
            this.remove;
          });
        };

        if (colorCount<colors.length-1) {colorCount++;} else {colorCount=0};
          var tween = wave.tweenTo(
            { 'position.y': screenHeight+screenHeight, 'opacity': 0 },
            { duration: 30000}
          );
        };

        view.onFrame = function(event) {
        if (ripples.length>0){

        ripples.forEach(function (item, index) {
          if (ripples[index].opacity >0)
            ripples[index].scale(1.03);          
          }); 
        };}

    </script>

  </head>
  <body>


    <!-- - - - - - - - - Paper.js - - - - - - - - -->
    <canvas id="climateCanvas" resize></canvas>


    <!-- - - - - - - - - Quote - - - - - - - - -->
    <div class="container noselect">
      <div class="quote">
        <p class="large">Florida’s next two decades could be more disruptive than any period in its history as climate change threatens the state’s 8,500-mile coastline. New modeling reveals that <span>‘100-year floods’ could occur every few years</span>, rather than once a century in many locations.</p>
        <p><a href="https://www.scientificamerican.com/article/miami-is-the-most-vulnerable-coastal-city-worldwide/" target="_blank">IFL Science</a></p>
      </div>
    </div>


    <!-- - - - - - - - - Navigation - - - - - - - - -->
    <div class="home">
      <a class="icon-wrapper" href="../index.html">
        <span class="icon icon-home"></span>
      </a>
    </div>


  </body>
</html>
