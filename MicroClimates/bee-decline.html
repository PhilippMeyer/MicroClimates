<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- General -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Anthozoa - MicroClimates</title>
    <meta name="description" content="Abstract explorations of our changing climate on planet Earth. Click, scroll and drag to explore.">

    <!-- Links -->
    <link href="../main.css" rel="stylesheet">
    <!-- Load latest acron version first -->
    <script type="text/javascript" src="https://unpkg.com/acorn"></script>
    <!-- Then load Paper.js -->
    <script type="text/javascript" src="https://unpkg.com/paper"></script>
    <!-- Place your Paperscript here -->
    <script type="text/paperscript" canvas="climateCanvas">

      var screenWidth = view.size.width;
      var screenHeight = view.size.height;
      let colors = [{ hue: 48, saturation: 0.18, brightness: 0.98 },{ hue: 48, saturation: 0.35, brightness: 0.98 }, { hue: 48, saturation: 0.62, brightness: 0.98 }, { hue: 48, saturation: 1, brightness: 0.98 }];
      var sides = 6;
      var radius = screenWidth/20;
      var xOffset = screenWidth/16;
      var yOffset = screenWidth/12;
      var x,y = xOffset;
      var k = 1;
      var combs = [];
      var c = 0;
      var colorfadeIndex = [];
      
      view.translate (-radius*2);
      
      for (let i = 0; i <= screenHeight/xOffset ; i++) {
          if (k < 2){
              x=screenWidth/9;
          }
          else {
              x = xOffset;
              k = 0;
          }
          for (let j = 0; j < screenWidth/yOffset; j++) {
          combs[c] = new Path.RegularPolygon(new Point(x, y), sides, radius);
              x += screenWidth/10;
              combs[c].data.id = c;
              combs[c].data.color = 0;
              combs[c].fillColor = colors [0];
              combs[c].opacity = 0;
          
              combs[c].onClick = function(event) {
                  if (this.data.color < colors.length-1 && this.opacity > 0){
                  this.data.color += 1;
                  this.opacity = 1;
                  this.fillColor = colors[this.data.color];
                  colorfadeIndex.push(this.data.id);
                  } 
              }
          c++
          };
          y += yOffset;
          k++;
         
      }
      
      setInterval(function(){
      
          var p = Math.floor(Math.random() * combs.length);
      
          view.onFrame = function(event) {
               for (let p = 0; p < colorfadeIndex.length; p ++ ) {
                  if (colorfadeIndex.length > 1 && combs[colorfadeIndex[p]].fillColor.saturation != colors[0].saturation && combs[colorfadeIndex[p]].data.color >0) {
                      combs[colorfadeIndex[p]].fillColor.saturation = (combs[colorfadeIndex[p]].fillColor.saturation - 0.01).toFixed(2); 
                  };
                           
               }
          
              if (combs[p].opacity == 1 && combs[p].data.color == 0){
                        var tween = combs[p].tweenTo(
              { opacity: 0 },
              { duration: 2000, start: false }
          );
          
          tween.start();
                  } else if (combs[p].opacity == 0  ){
                     var tween = combs[p].tweenTo(
              { opacity: 1 },
              { duration: 2000, start: false }
          );
          tween.start(); 
                  }
              
          };
      }, 100);
      
      
      
    </script>

  </head>
  <body>


    <!-- - - - - - - - - Paper.js - - - - - - - - -->
    <canvas id="climateCanvas" resize></canvas>


    <!-- - - - - - - - - Quote - - - - - - - - -->
    <div class="container noselect">
      <div class="quote">
        <p class="large"><span>90% of world’s wild flowering plant species</span> depend, entirely, or at least partly, <span>on animal pollination</span>, along with over 75% of world’s food crops, 35% of agricultural land.</p>
        <p class="quote-link"><a href="https://www.timesofisrael.com/to-bee-or-not-to-bee-international-bee-day-highlights-plight-of-pollinators/" target="_blank">The Times of Israel</a></p>
      </div>
    </div>


    <!-- - - - - - - - - Navigation - - - - - - - - -->
    <div class="home">
      <a class="icon-wrapper" href="../index.html">
        <span class="icon icon-home"></span>
      </a>
    </div>


  </body>
</html>
